---
title: linux网络(一)
date: 2020-03-06 12:02:18
categories:
- Linux
tags:
- linux
- 计算机网络
---


# linux网络 (一)


## ISO/ OSI七层模型


![](https://s2.ax1x.com/2020/03/06/3qcSXj.png)


### 物理层

现实设备： 网卡，网线，中继器，集线器

> 注意，电脑上的MAC地址是PC的物理地址,IP地址是PC的逻辑地址

作用:传输bit流

### 数据链路层

现实设备： 交换机,网桥 -> 可以隔离冲突域

作用：将数据封装成帧

特点：arp   数据纠错 -> 比如说 CSMA协议    


### 网络层

作用：提供逻辑地址

现实设备： 路由器


特点：路由选择协议 RIP、ICMP


### 传输层

特点：TCP UDP 流量控制、差错检测

作用：确定端口号


> 端口 0-65535

### 表示层

作用； 机器码 - 应用层编码 互相转换


## TCP/IP四层模型

TCP/IP模型为实际应用的模型

![](https://s2.ax1x.com/2020/03/07/3Oodyt.png)



## 数据封装过程


![](https://s2.ax1x.com/2020/03/07/3ObnAK.png)

## 数据包包头

### IP包头

需要注意的是IP包头是至少20字节


![](https://s2.ax1x.com/2020/03/07/3OLalQ.png)

### TCP包头


![](https://s2.ax1x.com/2020/03/07/3Ovj8f.png)




### UDP包头


![](https://s2.ax1x.com/2020/03/07/3OxZxU.png)



## IP地址分类

A类：1.0.0.0 - 126.255.255.255  私有IP 10.0.0.0 - 10.255.255.255

B类 128.0.0.0 - 191.255.255.255 私有IP 172.16.0.0-172.31.255.255

C类 192.0.0.0 - 223.255.255.255 私有IP 192.168.0.0 - 192.168.255.255


### 子网掩码

这里注意CIDR子网掩码的用法


网络号的求法： ip地址和子网掩码与运算

## TCP为什么需要三次握手和四次挥手

在探讨这个问题之前，我们需要知道下面几个细节:
1. TCP是全双工的，全双工我们至少需要两条信道，用来Host To Host的操作。
2. SYN是请求同步的意思，主机A需要向主机B发送数据
3. ACK是接收的意思，这个用来回复SYN请求。
* 第一次握手
[![cxEAvd.png](https://z3.ax1x.com/2021/04/25/cxEAvd.png)](https://imgtu.com/i/cxEAvd)

如上图所示主机A 像主机B发送请求需要在**自己的信道**发送数据

*  第二次握手



主机B同意刚才A过来的同步请求，并且也像主机A请求需要在自己的信道发送数据(全双工的体现)。也就是说他的回复是ACK SYN

* 第三次握手

主机A通过B过来的请求



* 第一次挥手

主机A决定断开**自己信道**，FIN = 1

* 第二次挥手

主机B收到主机A的请求，但是，这里先不断开自己的信道，因为有可能自己还要发送数据，所以只收到数据ACK=1

* 第三次挥手

主机B决定断开自己信道，FIN=1

* 第四次挥手

主机A收到请求 ACK=1